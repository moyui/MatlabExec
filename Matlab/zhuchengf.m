clc,clear
sn=load('sn.txt');
[m,n]=size(sn);
x0=sn(:,[1:n-1]);y0=sn(:,n);
hg1=[ones(m,1),x0]\y0;
hg1=hg1'
r=corrcoef(x0)
xd=zscore(x0);
yd=zscore(y0);
[vec1,lamda,rate]=pcacov(r)
f=repmat(sign(sum(vec1)),size(vec1,1),1);
vec2=vec1.*f;
constr=cumsum(rate)
df=xd*vec2;
num=input('请选择主成分的个数:')
hg21=df(:,[1:num])\yd;
hg22=vec2(:,1:num)*hg21;
hg23=[mean(y0)-std(y0)*mean(x0)./std(x0)*hg22,std(y0)*hg22'./std(x0)]
fprintf('y=%f',hg23(1))
